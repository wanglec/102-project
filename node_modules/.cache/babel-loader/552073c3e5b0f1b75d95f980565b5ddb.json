{"ast":null,"code":"import { AmbientLight, DirectionalLight, Vector2 } from 'three';\nimport ThreeGlobe from 'three-globe';\nimport ThreeRenderObjects from 'three-render-objects';\nimport accessorFn from 'accessor-fn';\nimport Kapsule from 'kapsule';\nimport TWEEN from '@tweenjs/tween.js';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction linkKapsule(kapsulePropName, kapsuleType) {\n  var dummyK = new kapsuleType(); // To extract defaults\n\n  return {\n    linkProp: function linkProp(prop) {\n      // link property config\n      return {\n        \"default\": dummyK[prop](),\n        onChange: function onChange(v, state) {\n          state[kapsulePropName][prop](v);\n        },\n        triggerUpdate: false\n      };\n    },\n    linkMethod: function linkMethod(method) {\n      // link method pass-through\n      return function (state) {\n        var kapsuleInstance = state[kapsulePropName];\n\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        var returnVal = kapsuleInstance[method].apply(kapsuleInstance, args);\n        return returnVal === kapsuleInstance ? this // chain based on the parent object, not the inner kapsule\n        : returnVal;\n      };\n    }\n  };\n}\n\nvar three = window.THREE ? window.THREE // Prefer consumption from global THREE, if exists\n: {\n  AmbientLight: AmbientLight,\n  DirectionalLight: DirectionalLight,\n  Vector2: Vector2\n}; // Expose config from ThreeGlobe\n\nvar bindGlobe = linkKapsule('globe', ThreeGlobe);\nvar linkedGlobeProps = Object.assign.apply(Object, _toConsumableArray(['globeImageUrl', 'bumpImageUrl', 'showGlobe', 'showGraticules', 'showAtmosphere', 'atmosphereColor', 'atmosphereAltitude', 'globeMaterial', 'onGlobeReady', 'pointsData', 'pointLat', 'pointLng', 'pointColor', 'pointAltitude', 'pointRadius', 'pointResolution', 'pointsMerge', 'pointsTransitionDuration', 'arcsData', 'arcStartLat', 'arcStartLng', 'arcEndLat', 'arcEndLng', 'arcColor', 'arcAltitude', 'arcAltitudeAutoScale', 'arcStroke', 'arcCurveResolution', 'arcCircularResolution', 'arcDashLength', 'arcDashGap', 'arcDashInitialGap', 'arcDashAnimateTime', 'arcsTransitionDuration', 'polygonsData', 'polygonGeoJsonGeometry', 'polygonCapColor', 'polygonCapMaterial', 'polygonSideColor', 'polygonSideMaterial', 'polygonStrokeColor', 'polygonAltitude', 'polygonCapCurvatureResolution', 'polygonsTransitionDuration', 'pathsData', 'pathPoints', 'pathPointLat', 'pathPointLng', 'pathPointAlt', 'pathResolution', 'pathColor', 'pathStroke', 'pathDashLength', 'pathDashGap', 'pathDashInitialGap', 'pathDashAnimateTime', 'pathTransitionDuration', 'hexBinPointsData', 'hexBinPointLat', 'hexBinPointLng', 'hexBinPointWeight', 'hexBinResolution', 'hexMargin', 'hexTopCurvatureResolution', 'hexTopColor', 'hexSideColor', 'hexAltitude', 'hexBinMerge', 'hexTransitionDuration', 'hexPolygonsData', 'hexPolygonGeoJsonGeometry', 'hexPolygonColor', 'hexPolygonAltitude', 'hexPolygonResolution', 'hexPolygonMargin', 'hexPolygonCurvatureResolution', 'hexPolygonsTransitionDuration', 'tilesData', 'tileLat', 'tileLng', 'tileAltitude', 'tileWidth', 'tileHeight', 'tileUseGlobeProjection', 'tileMaterial', 'tileCurvatureResolution', 'tilesTransitionDuration', 'labelsData', 'labelLat', 'labelLng', 'labelAltitude', 'labelRotation', 'labelText', 'labelSize', 'labelTypeFace', 'labelColor', 'labelResolution', 'labelIncludeDot', 'labelDotRadius', 'labelDotOrientation', 'labelsTransitionDuration', 'customLayerData', 'customThreeObject', 'customThreeObjectUpdate'].map(function (p) {\n  return _defineProperty({}, p, bindGlobe.linkProp(p));\n})));\nvar linkedGlobeMethods = Object.assign.apply(Object, _toConsumableArray(['getCoords', 'toGeoCoords'].map(function (p) {\n  return _defineProperty({}, p, bindGlobe.linkMethod(p));\n}))); // Expose config from renderObjs\n\nvar bindRenderObjs = linkKapsule('renderObjs', ThreeRenderObjects);\nvar linkedRenderObjsProps = Object.assign.apply(Object, _toConsumableArray(['width', 'height', 'backgroundColor', 'backgroundImageUrl', 'enablePointerInteraction'].map(function (p) {\n  return _defineProperty({}, p, bindRenderObjs.linkProp(p));\n})));\nvar linkedRenderObjsMethods = Object.assign.apply(Object, _toConsumableArray(['postProcessingComposer'].map(function (p) {\n  return _defineProperty({}, p, bindRenderObjs.linkMethod(p));\n}))); //\n\nvar GLOBE_RADIUS = 100;\nvar globe = Kapsule({\n  props: _objectSpread2(_objectSpread2({\n    onZoom: {\n      triggerUpdate: false\n    },\n    onGlobeClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onGlobeRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    pointLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onPointClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onPointRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onPointHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    arcLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onArcClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onArcRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onArcHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    polygonLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onPolygonClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onPolygonRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onPolygonHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    pathLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onPathClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onPathRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onPathHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    hexLabel: {\n      triggerUpdate: false\n    },\n    onHexClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onHexRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onHexHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    hexPolygonLabel: {\n      triggerUpdate: false\n    },\n    onHexPolygonClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onHexPolygonRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onHexPolygonHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    tileLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onTileClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onTileRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onTileHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    labelLabel: {\n      triggerUpdate: false\n    },\n    onLabelClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onLabelRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onLabelHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    customLayerLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onCustomLayerClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onCustomLayerRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onCustomLayerHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    pointerEventsFilter: {\n      \"default\": function _default() {\n        return true;\n      },\n      triggerUpdate: false,\n      onChange: function onChange(filterFn, state) {\n        return state.renderObjs.hoverFilter(function (obj) {\n          return filterFn(obj, obj.__data);\n        });\n      }\n    },\n    lineHoverPrecision: {\n      \"default\": 0.2,\n      triggerUpdate: false,\n      onChange: function onChange(val, state) {\n        return state.renderObjs.lineHoverPrecision(val);\n      }\n    }\n  }, linkedGlobeProps), linkedRenderObjsProps),\n  methods: _objectSpread2(_objectSpread2({\n    pauseAnimation: function pauseAnimation(state) {\n      if (state.animationFrameRequestId !== null) {\n        cancelAnimationFrame(state.animationFrameRequestId);\n        state.animationFrameRequestId = null;\n      }\n\n      return this;\n    },\n    resumeAnimation: function resumeAnimation(state) {\n      if (state.animationFrameRequestId === null) {\n        this._animationCycle();\n      }\n\n      return this;\n    },\n    _animationCycle: function _animationCycle(state) {\n      // Frame cycle\n      state.renderObjs.tick();\n      state.animationFrameRequestId = requestAnimationFrame(this._animationCycle);\n    },\n    pointOfView: function pointOfView(state) {\n      var geoCoords = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var transitionDuration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var curGeoCoords = getGeoCoords(); // Getter\n\n      if (geoCoords.lat === undefined && geoCoords.lng === undefined && geoCoords.altitude === undefined) {\n        return curGeoCoords;\n      } else {\n        // Setter\n        var finalGeoCoords = Object.assign({}, curGeoCoords, geoCoords);\n\n        if (!transitionDuration) {\n          // no animation\n          setCameraPos(finalGeoCoords);\n        } else {\n          // Avoid rotating more than 180deg longitude\n          while (curGeoCoords.lng - finalGeoCoords.lng > 180) {\n            curGeoCoords.lng -= 360;\n          }\n\n          while (curGeoCoords.lng - finalGeoCoords.lng < -180) {\n            curGeoCoords.lng += 360;\n          }\n\n          new TWEEN.Tween(curGeoCoords).to(finalGeoCoords, transitionDuration).easing(TWEEN.Easing.Cubic.InOut).onUpdate(setCameraPos).start();\n        }\n\n        return this;\n      } //\n\n\n      function getGeoCoords() {\n        return state.globe.toGeoCoords(state.renderObjs.cameraPosition());\n      }\n\n      function setCameraPos(_ref5) {\n        var lat = _ref5.lat,\n            lng = _ref5.lng,\n            altitude = _ref5.altitude;\n        state.renderObjs.cameraPosition(state.globe.getCoords(lat, lng, altitude));\n      }\n    },\n    getScreenCoords: function getScreenCoords(state) {\n      var _state$globe;\n\n      for (var _len = arguments.length, geoCoords = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        geoCoords[_key - 1] = arguments[_key];\n      }\n\n      var cartesianCoords = (_state$globe = state.globe).getCoords.apply(_state$globe, geoCoords);\n\n      return state.renderObjs.getScreenCoords(cartesianCoords.x, cartesianCoords.y, cartesianCoords.z);\n    },\n    toGlobeCoords: function toGlobeCoords(state, x, y) {\n      var globeIntersects = state.renderObjs.intersectingObjects(x, y).find(function (d) {\n        return d.object.__globeObjType === 'globe';\n      });\n      if (!globeIntersects) return null; // coords outside globe\n\n      var _state$globe$toGeoCoo = state.globe.toGeoCoords(globeIntersects.point),\n          lat = _state$globe$toGeoCoo.lat,\n          lng = _state$globe$toGeoCoo.lng;\n\n      return {\n        lat: lat,\n        lng: lng\n      };\n    },\n    scene: function scene(state) {\n      return state.renderObjs.scene();\n    },\n    // Expose scene\n    camera: function camera(state) {\n      return state.renderObjs.camera();\n    },\n    // Expose camera\n    renderer: function renderer(state) {\n      return state.renderObjs.renderer();\n    },\n    // Expose renderer\n    controls: function controls(state) {\n      return state.renderObjs.controls();\n    },\n    // Expose controls\n    _destructor: function _destructor() {\n      this.pauseAnimation();\n      this.pointsData([]);\n      this.arcsData([]);\n      this.polygonsData([]);\n      this.pathsData([]);\n      this.hexBinPointsData([]);\n      this.hexPolygonsData([]);\n      this.tilesData([]);\n      this.labelsData([]);\n      this.customLayerData([]);\n    }\n  }, linkedGlobeMethods), linkedRenderObjsMethods),\n  stateInit: function stateInit(_ref6) {\n    var rendererConfig = _ref6.rendererConfig,\n        _ref6$waitForGlobeRea = _ref6.waitForGlobeReady,\n        waitForGlobeReady = _ref6$waitForGlobeRea === void 0 ? true : _ref6$waitForGlobeRea,\n        globeInitConfig = _objectWithoutProperties(_ref6, [\"rendererConfig\", \"waitForGlobeReady\"]);\n\n    return {\n      globe: new ThreeGlobe(_objectSpread2({\n        waitForGlobeReady: waitForGlobeReady\n      }, globeInitConfig)),\n      renderObjs: ThreeRenderObjects({\n        controlType: 'orbit',\n        rendererConfig: rendererConfig,\n        waitForLoadComplete: waitForGlobeReady\n      }).skyRadius(GLOBE_RADIUS * 500).showNavInfo(false)\n    };\n  },\n  init: function init(domNode, state) {\n    var _this = this; // Wipe DOM\n\n\n    domNode.innerHTML = ''; // Add relative container\n\n    domNode.appendChild(state.container = document.createElement('div'));\n    state.container.style.position = 'relative'; // Add renderObjs\n\n    var roDomNode = document.createElement('div');\n    state.container.appendChild(roDomNode);\n    state.renderObjs(roDomNode); // inject renderer size on three-globe\n\n    state.globe.rendererSize(state.renderObjs.renderer().getSize(new three.Vector2())); // set initial distance\n\n    this.pointOfView({\n      altitude: 2.5\n    }); // calibrate orbit controls\n\n    var controls = state.renderObjs.controls();\n    controls.minDistance = GLOBE_RADIUS * 1.01; // just above the surface\n\n    setTimeout(function () {\n      return controls.maxDistance = GLOBE_RADIUS * 100;\n    }); // apply async  after renderObjs sets maxDistance\n\n    controls.enablePan = false;\n    controls.enableDamping = true;\n    controls.dampingFactor = 0.1;\n    controls.rotateSpeed = 0.3;\n    controls.zoomSpeed = 0.3;\n    controls.addEventListener('change', function () {\n      // adjust controls speed based on altitude\n      var pov = _this.pointOfView();\n\n      controls.rotateSpeed = pov.altitude * 0.2; // Math.pow(pov.altitude + 1, 2) * 0.025;\n\n      controls.zoomSpeed = (pov.altitude + 1) * 0.1; // Math.sqrt(pov.altitude) * 0.2;\n\n      state.onZoom && state.onZoom(pov);\n    }); // config renderObjs\n\n    var getGlobeObj = function getGlobeObj(object) {\n      var obj = object; // recurse up object chain until finding the globe object\n\n      while (obj && !obj.hasOwnProperty('__globeObjType')) {\n        obj = obj.parent;\n      }\n\n      return obj;\n    };\n\n    var dataAccessors = {\n      point: function point(d) {\n        return d;\n      },\n      arc: function arc(d) {\n        return d;\n      },\n      polygon: function polygon(d) {\n        return d.data;\n      },\n      path: function path(d) {\n        return d;\n      },\n      hexbin: function hexbin(d) {\n        return d;\n      },\n      hexPolygon: function hexPolygon(d) {\n        return d;\n      },\n      tile: function tile(d) {\n        return d;\n      },\n      label: function label(d) {\n        return d;\n      },\n      custom: function custom(d) {\n        return d;\n      }\n    };\n    state.renderObjs.objects([// Populate scene\n    new three.AmbientLight(0xbbbbbb), new three.DirectionalLight(0xffffff, 0.6), state.globe]).hoverOrderComparator(function (a, b) {\n      var aObj = getGlobeObj(a);\n      var bObj = getGlobeObj(b); // de-prioritize background / non-globe objects\n\n      var isBackground = function isBackground(o) {\n        return !o;\n      }; // || o.__globeObjType === 'globe' || o.__globeObjType === 'atmosphere';\n\n\n      return isBackground(aObj) - isBackground(bObj);\n    }).tooltipContent(function (obj) {\n      var objAccessors = {\n        point: state.pointLabel,\n        arc: state.arcLabel,\n        polygon: state.polygonLabel,\n        path: state.pathLabel,\n        hexbin: state.hexLabel,\n        hexPolygon: state.hexPolygonLabel,\n        tile: state.tileLabel,\n        label: state.labelLabel,\n        custom: state.customLayerLabel\n      };\n      var globeObj = getGlobeObj(obj);\n      var objType = globeObj.__globeObjType;\n      return globeObj && objAccessors.hasOwnProperty(objType) && dataAccessors.hasOwnProperty(objType) ? accessorFn(objAccessors[objType])(dataAccessors[objType](globeObj.__data)) || '' : '';\n    }).onHover(function (obj) {\n      // Update tooltip and trigger onHover events\n      var hoverObjFns = {\n        point: state.onPointHover,\n        arc: state.onArcHover,\n        polygon: state.onPolygonHover,\n        path: state.onPathHover,\n        hexbin: state.onHexHover,\n        hexPolygon: state.onHexPolygonHover,\n        tile: state.onTileHover,\n        label: state.onLabelHover,\n        custom: state.onCustomLayerHover\n      };\n      var hoverObj = getGlobeObj(obj); // ignore non-recognised obj types\n\n      hoverObj && !hoverObjFns.hasOwnProperty(hoverObj.__globeObjType) && (hoverObj = null);\n\n      if (hoverObj !== state.hoverObj) {\n        var prevObjType = state.hoverObj ? state.hoverObj.__globeObjType : null;\n        var prevObjData = state.hoverObj ? dataAccessors[prevObjType](state.hoverObj.__data) : null;\n        var objType = hoverObj ? hoverObj.__globeObjType : null;\n        var objData = hoverObj ? dataAccessors[objType](hoverObj.__data) : null;\n\n        if (prevObjType && prevObjType !== objType) {\n          // Hover out\n          hoverObjFns[prevObjType](null, prevObjData);\n        }\n\n        if (objType) {\n          // Hover in\n          hoverObjFns[objType](objData, prevObjType === objType ? prevObjData : null);\n        }\n\n        state.hoverObj = hoverObj;\n      }\n    }).onClick(function (obj, ev, point) {\n      if (!obj) return; // ignore background clicks\n      // Handle click events on objects\n\n      var objFns = {\n        globe: state.onGlobeClick,\n        point: state.onPointClick,\n        arc: state.onArcClick,\n        polygon: state.onPolygonClick,\n        path: state.onPathClick,\n        hexbin: state.onHexClick,\n        hexPolygon: state.onHexPolygonClick,\n        tile: state.onTileClick,\n        label: state.onLabelClick,\n        custom: state.onCustomLayerClick\n      };\n      var globeObj = getGlobeObj(obj);\n      var objType = globeObj.__globeObjType;\n\n      if (globeObj && objFns.hasOwnProperty(objType)) {\n        var args = [ev];\n\n        if (objType === 'globe') {\n          // include click coords in { lat, lng }\n          var _this$toGeoCoords = _this.toGeoCoords(point),\n              lat = _this$toGeoCoords.lat,\n              lng = _this$toGeoCoords.lng;\n\n          args.unshift({\n            lat: lat,\n            lng: lng\n          });\n        }\n\n        dataAccessors.hasOwnProperty(objType) && args.unshift(dataAccessors[objType](globeObj.__data));\n        objFns[objType].apply(objFns, args);\n      }\n    }).onRightClick(function (obj, ev, point) {\n      if (!obj) return; // ignore background clicks\n      // Handle right-click events\n\n      var objFns = {\n        globe: state.onGlobeRightClick,\n        point: state.onPointRightClick,\n        arc: state.onArcRightClick,\n        polygon: state.onPolygonRightClick,\n        path: state.onPathRightClick,\n        hexbin: state.onHexRightClick,\n        hexPolygon: state.onHexPolygonRightClick,\n        tile: state.onTileRightClick,\n        label: state.onLabelRightClick,\n        custom: state.onCustomLayerRightClick\n      };\n      var globeObj = getGlobeObj(obj);\n      var objType = globeObj.__globeObjType;\n\n      if (globeObj && objFns.hasOwnProperty(objType)) {\n        var args = [ev];\n\n        if (objType === 'globe') {\n          // include click coords in { lat, lng }\n          var _this$toGeoCoords2 = _this.toGeoCoords(point),\n              lat = _this$toGeoCoords2.lat,\n              lng = _this$toGeoCoords2.lng;\n\n          args.unshift({\n            lat: lat,\n            lng: lng\n          });\n        }\n\n        dataAccessors.hasOwnProperty(objType) && args.unshift(dataAccessors[objType](globeObj.__data));\n        objFns[objType].apply(objFns, args);\n      }\n    }); //\n    // Kick-off renderer\n\n    this._animationCycle();\n  }\n});\nexport default globe;","map":{"version":3,"sources":["/Users/lechuanwang/node_modules/globe.gl/dist/globe.gl.module.js"],"names":["AmbientLight","DirectionalLight","Vector2","ThreeGlobe","ThreeRenderObjects","accessorFn","Kapsule","TWEEN","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","_objectWithoutPropertiesLoose","excluded","sourceKeys","indexOf","_objectWithoutProperties","sourceSymbolKeys","prototype","propertyIsEnumerable","call","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","Symbol","iterator","from","o","minLen","n","toString","slice","constructor","name","test","len","arr2","TypeError","linkKapsule","kapsulePropName","kapsuleType","dummyK","linkProp","prop","onChange","v","state","triggerUpdate","linkMethod","method","kapsuleInstance","_len","args","_key","returnVal","three","window","THREE","bindGlobe","linkedGlobeProps","assign","map","p","linkedGlobeMethods","bindRenderObjs","linkedRenderObjsProps","linkedRenderObjsMethods","GLOBE_RADIUS","globe","props","onZoom","onGlobeClick","_default","onGlobeRightClick","pointLabel","onPointClick","onPointRightClick","onPointHover","arcLabel","onArcClick","onArcRightClick","onArcHover","polygonLabel","onPolygonClick","onPolygonRightClick","onPolygonHover","pathLabel","onPathClick","onPathRightClick","onPathHover","hexLabel","onHexClick","onHexRightClick","onHexHover","hexPolygonLabel","onHexPolygonClick","onHexPolygonRightClick","onHexPolygonHover","tileLabel","onTileClick","onTileRightClick","onTileHover","labelLabel","onLabelClick","onLabelRightClick","onLabelHover","customLayerLabel","onCustomLayerClick","onCustomLayerRightClick","onCustomLayerHover","pointerEventsFilter","filterFn","renderObjs","hoverFilter","__data","lineHoverPrecision","val","methods","pauseAnimation","animationFrameRequestId","cancelAnimationFrame","resumeAnimation","_animationCycle","tick","requestAnimationFrame","pointOfView","geoCoords","undefined","transitionDuration","curGeoCoords","getGeoCoords","lat","lng","altitude","finalGeoCoords","setCameraPos","Tween","to","easing","Easing","Cubic","InOut","onUpdate","start","toGeoCoords","cameraPosition","_ref5","getCoords","getScreenCoords","_state$globe","cartesianCoords","x","y","z","toGlobeCoords","globeIntersects","intersectingObjects","find","d","__globeObjType","_state$globe$toGeoCoo","point","scene","camera","renderer","controls","_destructor","pointsData","arcsData","polygonsData","pathsData","hexBinPointsData","hexPolygonsData","tilesData","labelsData","customLayerData","stateInit","_ref6","rendererConfig","_ref6$waitForGlobeRea","waitForGlobeReady","globeInitConfig","controlType","waitForLoadComplete","skyRadius","showNavInfo","init","domNode","_this","innerHTML","appendChild","container","document","createElement","style","position","roDomNode","rendererSize","getSize","minDistance","setTimeout","maxDistance","enablePan","enableDamping","dampingFactor","rotateSpeed","zoomSpeed","addEventListener","pov","getGlobeObj","hasOwnProperty","parent","dataAccessors","arc","polygon","data","path","hexbin","hexPolygon","tile","label","custom","objects","hoverOrderComparator","a","b","aObj","bObj","isBackground","tooltipContent","objAccessors","globeObj","objType","onHover","hoverObjFns","hoverObj","prevObjType","prevObjData","objData","onClick","ev","objFns","_this$toGeoCoords","unshift","onRightClick","_this$toGeoCoords2"],"mappings":"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","sourcesContent":["import { AmbientLight, DirectionalLight, Vector2 } from 'three';\nimport ThreeGlobe from 'three-globe';\nimport ThreeRenderObjects from 'three-render-objects';\nimport accessorFn from 'accessor-fn';\nimport Kapsule from 'kapsule';\nimport TWEEN from '@tweenjs/tween.js';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction linkKapsule (kapsulePropName, kapsuleType) {\n  var dummyK = new kapsuleType(); // To extract defaults\n\n  return {\n    linkProp: function linkProp(prop) {\n      // link property config\n      return {\n        \"default\": dummyK[prop](),\n        onChange: function onChange(v, state) {\n          state[kapsulePropName][prop](v);\n        },\n        triggerUpdate: false\n      };\n    },\n    linkMethod: function linkMethod(method) {\n      // link method pass-through\n      return function (state) {\n        var kapsuleInstance = state[kapsulePropName];\n\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        var returnVal = kapsuleInstance[method].apply(kapsuleInstance, args);\n        return returnVal === kapsuleInstance ? this // chain based on the parent object, not the inner kapsule\n        : returnVal;\n      };\n    }\n  };\n}\n\nvar three = window.THREE ? window.THREE // Prefer consumption from global THREE, if exists\n: {\n  AmbientLight: AmbientLight,\n  DirectionalLight: DirectionalLight,\n  Vector2: Vector2\n};\n// Expose config from ThreeGlobe\n\nvar bindGlobe = linkKapsule('globe', ThreeGlobe);\nvar linkedGlobeProps = Object.assign.apply(Object, _toConsumableArray(['globeImageUrl', 'bumpImageUrl', 'showGlobe', 'showGraticules', 'showAtmosphere', 'atmosphereColor', 'atmosphereAltitude', 'globeMaterial', 'onGlobeReady', 'pointsData', 'pointLat', 'pointLng', 'pointColor', 'pointAltitude', 'pointRadius', 'pointResolution', 'pointsMerge', 'pointsTransitionDuration', 'arcsData', 'arcStartLat', 'arcStartLng', 'arcEndLat', 'arcEndLng', 'arcColor', 'arcAltitude', 'arcAltitudeAutoScale', 'arcStroke', 'arcCurveResolution', 'arcCircularResolution', 'arcDashLength', 'arcDashGap', 'arcDashInitialGap', 'arcDashAnimateTime', 'arcsTransitionDuration', 'polygonsData', 'polygonGeoJsonGeometry', 'polygonCapColor', 'polygonCapMaterial', 'polygonSideColor', 'polygonSideMaterial', 'polygonStrokeColor', 'polygonAltitude', 'polygonCapCurvatureResolution', 'polygonsTransitionDuration', 'pathsData', 'pathPoints', 'pathPointLat', 'pathPointLng', 'pathPointAlt', 'pathResolution', 'pathColor', 'pathStroke', 'pathDashLength', 'pathDashGap', 'pathDashInitialGap', 'pathDashAnimateTime', 'pathTransitionDuration', 'hexBinPointsData', 'hexBinPointLat', 'hexBinPointLng', 'hexBinPointWeight', 'hexBinResolution', 'hexMargin', 'hexTopCurvatureResolution', 'hexTopColor', 'hexSideColor', 'hexAltitude', 'hexBinMerge', 'hexTransitionDuration', 'hexPolygonsData', 'hexPolygonGeoJsonGeometry', 'hexPolygonColor', 'hexPolygonAltitude', 'hexPolygonResolution', 'hexPolygonMargin', 'hexPolygonCurvatureResolution', 'hexPolygonsTransitionDuration', 'tilesData', 'tileLat', 'tileLng', 'tileAltitude', 'tileWidth', 'tileHeight', 'tileUseGlobeProjection', 'tileMaterial', 'tileCurvatureResolution', 'tilesTransitionDuration', 'labelsData', 'labelLat', 'labelLng', 'labelAltitude', 'labelRotation', 'labelText', 'labelSize', 'labelTypeFace', 'labelColor', 'labelResolution', 'labelIncludeDot', 'labelDotRadius', 'labelDotOrientation', 'labelsTransitionDuration', 'customLayerData', 'customThreeObject', 'customThreeObjectUpdate'].map(function (p) {\n  return _defineProperty({}, p, bindGlobe.linkProp(p));\n})));\nvar linkedGlobeMethods = Object.assign.apply(Object, _toConsumableArray(['getCoords', 'toGeoCoords'].map(function (p) {\n  return _defineProperty({}, p, bindGlobe.linkMethod(p));\n}))); // Expose config from renderObjs\n\nvar bindRenderObjs = linkKapsule('renderObjs', ThreeRenderObjects);\nvar linkedRenderObjsProps = Object.assign.apply(Object, _toConsumableArray(['width', 'height', 'backgroundColor', 'backgroundImageUrl', 'enablePointerInteraction'].map(function (p) {\n  return _defineProperty({}, p, bindRenderObjs.linkProp(p));\n})));\nvar linkedRenderObjsMethods = Object.assign.apply(Object, _toConsumableArray(['postProcessingComposer'].map(function (p) {\n  return _defineProperty({}, p, bindRenderObjs.linkMethod(p));\n}))); //\n\nvar GLOBE_RADIUS = 100;\nvar globe = Kapsule({\n  props: _objectSpread2(_objectSpread2({\n    onZoom: {\n      triggerUpdate: false\n    },\n    onGlobeClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onGlobeRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    pointLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onPointClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onPointRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onPointHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    arcLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onArcClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onArcRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onArcHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    polygonLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onPolygonClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onPolygonRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onPolygonHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    pathLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onPathClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onPathRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onPathHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    hexLabel: {\n      triggerUpdate: false\n    },\n    onHexClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onHexRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onHexHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    hexPolygonLabel: {\n      triggerUpdate: false\n    },\n    onHexPolygonClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onHexPolygonRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onHexPolygonHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    tileLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onTileClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onTileRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onTileHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    labelLabel: {\n      triggerUpdate: false\n    },\n    onLabelClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onLabelRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onLabelHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    customLayerLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    onCustomLayerClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onCustomLayerRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onCustomLayerHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    pointerEventsFilter: {\n      \"default\": function _default() {\n        return true;\n      },\n      triggerUpdate: false,\n      onChange: function onChange(filterFn, state) {\n        return state.renderObjs.hoverFilter(function (obj) {\n          return filterFn(obj, obj.__data);\n        });\n      }\n    },\n    lineHoverPrecision: {\n      \"default\": 0.2,\n      triggerUpdate: false,\n      onChange: function onChange(val, state) {\n        return state.renderObjs.lineHoverPrecision(val);\n      }\n    }\n  }, linkedGlobeProps), linkedRenderObjsProps),\n  methods: _objectSpread2(_objectSpread2({\n    pauseAnimation: function pauseAnimation(state) {\n      if (state.animationFrameRequestId !== null) {\n        cancelAnimationFrame(state.animationFrameRequestId);\n        state.animationFrameRequestId = null;\n      }\n\n      return this;\n    },\n    resumeAnimation: function resumeAnimation(state) {\n      if (state.animationFrameRequestId === null) {\n        this._animationCycle();\n      }\n\n      return this;\n    },\n    _animationCycle: function _animationCycle(state) {\n      // Frame cycle\n      state.renderObjs.tick();\n      state.animationFrameRequestId = requestAnimationFrame(this._animationCycle);\n    },\n    pointOfView: function pointOfView(state) {\n      var geoCoords = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var transitionDuration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var curGeoCoords = getGeoCoords(); // Getter\n\n      if (geoCoords.lat === undefined && geoCoords.lng === undefined && geoCoords.altitude === undefined) {\n        return curGeoCoords;\n      } else {\n        // Setter\n        var finalGeoCoords = Object.assign({}, curGeoCoords, geoCoords);\n\n        if (!transitionDuration) {\n          // no animation\n          setCameraPos(finalGeoCoords);\n        } else {\n          // Avoid rotating more than 180deg longitude\n          while (curGeoCoords.lng - finalGeoCoords.lng > 180) {\n            curGeoCoords.lng -= 360;\n          }\n\n          while (curGeoCoords.lng - finalGeoCoords.lng < -180) {\n            curGeoCoords.lng += 360;\n          }\n\n          new TWEEN.Tween(curGeoCoords).to(finalGeoCoords, transitionDuration).easing(TWEEN.Easing.Cubic.InOut).onUpdate(setCameraPos).start();\n        }\n\n        return this;\n      } //\n\n\n      function getGeoCoords() {\n        return state.globe.toGeoCoords(state.renderObjs.cameraPosition());\n      }\n\n      function setCameraPos(_ref5) {\n        var lat = _ref5.lat,\n            lng = _ref5.lng,\n            altitude = _ref5.altitude;\n        state.renderObjs.cameraPosition(state.globe.getCoords(lat, lng, altitude));\n      }\n    },\n    getScreenCoords: function getScreenCoords(state) {\n      var _state$globe;\n\n      for (var _len = arguments.length, geoCoords = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        geoCoords[_key - 1] = arguments[_key];\n      }\n\n      var cartesianCoords = (_state$globe = state.globe).getCoords.apply(_state$globe, geoCoords);\n\n      return state.renderObjs.getScreenCoords(cartesianCoords.x, cartesianCoords.y, cartesianCoords.z);\n    },\n    toGlobeCoords: function toGlobeCoords(state, x, y) {\n      var globeIntersects = state.renderObjs.intersectingObjects(x, y).find(function (d) {\n        return d.object.__globeObjType === 'globe';\n      });\n      if (!globeIntersects) return null; // coords outside globe\n\n      var _state$globe$toGeoCoo = state.globe.toGeoCoords(globeIntersects.point),\n          lat = _state$globe$toGeoCoo.lat,\n          lng = _state$globe$toGeoCoo.lng;\n\n      return {\n        lat: lat,\n        lng: lng\n      };\n    },\n    scene: function scene(state) {\n      return state.renderObjs.scene();\n    },\n    // Expose scene\n    camera: function camera(state) {\n      return state.renderObjs.camera();\n    },\n    // Expose camera\n    renderer: function renderer(state) {\n      return state.renderObjs.renderer();\n    },\n    // Expose renderer\n    controls: function controls(state) {\n      return state.renderObjs.controls();\n    },\n    // Expose controls\n    _destructor: function _destructor() {\n      this.pauseAnimation();\n      this.pointsData([]);\n      this.arcsData([]);\n      this.polygonsData([]);\n      this.pathsData([]);\n      this.hexBinPointsData([]);\n      this.hexPolygonsData([]);\n      this.tilesData([]);\n      this.labelsData([]);\n      this.customLayerData([]);\n    }\n  }, linkedGlobeMethods), linkedRenderObjsMethods),\n  stateInit: function stateInit(_ref6) {\n    var rendererConfig = _ref6.rendererConfig,\n        _ref6$waitForGlobeRea = _ref6.waitForGlobeReady,\n        waitForGlobeReady = _ref6$waitForGlobeRea === void 0 ? true : _ref6$waitForGlobeRea,\n        globeInitConfig = _objectWithoutProperties(_ref6, [\"rendererConfig\", \"waitForGlobeReady\"]);\n\n    return {\n      globe: new ThreeGlobe(_objectSpread2({\n        waitForGlobeReady: waitForGlobeReady\n      }, globeInitConfig)),\n      renderObjs: ThreeRenderObjects({\n        controlType: 'orbit',\n        rendererConfig: rendererConfig,\n        waitForLoadComplete: waitForGlobeReady\n      }).skyRadius(GLOBE_RADIUS * 500).showNavInfo(false)\n    };\n  },\n  init: function init(domNode, state) {\n    var _this = this;\n\n    // Wipe DOM\n    domNode.innerHTML = ''; // Add relative container\n\n    domNode.appendChild(state.container = document.createElement('div'));\n    state.container.style.position = 'relative'; // Add renderObjs\n\n    var roDomNode = document.createElement('div');\n    state.container.appendChild(roDomNode);\n    state.renderObjs(roDomNode); // inject renderer size on three-globe\n\n    state.globe.rendererSize(state.renderObjs.renderer().getSize(new three.Vector2())); // set initial distance\n\n    this.pointOfView({\n      altitude: 2.5\n    }); // calibrate orbit controls\n\n    var controls = state.renderObjs.controls();\n    controls.minDistance = GLOBE_RADIUS * 1.01; // just above the surface\n\n    setTimeout(function () {\n      return controls.maxDistance = GLOBE_RADIUS * 100;\n    }); // apply async  after renderObjs sets maxDistance\n\n    controls.enablePan = false;\n    controls.enableDamping = true;\n    controls.dampingFactor = 0.1;\n    controls.rotateSpeed = 0.3;\n    controls.zoomSpeed = 0.3;\n    controls.addEventListener('change', function () {\n      // adjust controls speed based on altitude\n      var pov = _this.pointOfView();\n\n      controls.rotateSpeed = pov.altitude * 0.2; // Math.pow(pov.altitude + 1, 2) * 0.025;\n\n      controls.zoomSpeed = (pov.altitude + 1) * 0.1; // Math.sqrt(pov.altitude) * 0.2;\n\n      state.onZoom && state.onZoom(pov);\n    }); // config renderObjs\n\n    var getGlobeObj = function getGlobeObj(object) {\n      var obj = object; // recurse up object chain until finding the globe object\n\n      while (obj && !obj.hasOwnProperty('__globeObjType')) {\n        obj = obj.parent;\n      }\n\n      return obj;\n    };\n\n    var dataAccessors = {\n      point: function point(d) {\n        return d;\n      },\n      arc: function arc(d) {\n        return d;\n      },\n      polygon: function polygon(d) {\n        return d.data;\n      },\n      path: function path(d) {\n        return d;\n      },\n      hexbin: function hexbin(d) {\n        return d;\n      },\n      hexPolygon: function hexPolygon(d) {\n        return d;\n      },\n      tile: function tile(d) {\n        return d;\n      },\n      label: function label(d) {\n        return d;\n      },\n      custom: function custom(d) {\n        return d;\n      }\n    };\n    state.renderObjs.objects([// Populate scene\n    new three.AmbientLight(0xbbbbbb), new three.DirectionalLight(0xffffff, 0.6), state.globe]).hoverOrderComparator(function (a, b) {\n      var aObj = getGlobeObj(a);\n      var bObj = getGlobeObj(b); // de-prioritize background / non-globe objects\n\n      var isBackground = function isBackground(o) {\n        return !o;\n      }; // || o.__globeObjType === 'globe' || o.__globeObjType === 'atmosphere';\n\n\n      return isBackground(aObj) - isBackground(bObj);\n    }).tooltipContent(function (obj) {\n      var objAccessors = {\n        point: state.pointLabel,\n        arc: state.arcLabel,\n        polygon: state.polygonLabel,\n        path: state.pathLabel,\n        hexbin: state.hexLabel,\n        hexPolygon: state.hexPolygonLabel,\n        tile: state.tileLabel,\n        label: state.labelLabel,\n        custom: state.customLayerLabel\n      };\n      var globeObj = getGlobeObj(obj);\n      var objType = globeObj.__globeObjType;\n      return globeObj && objAccessors.hasOwnProperty(objType) && dataAccessors.hasOwnProperty(objType) ? accessorFn(objAccessors[objType])(dataAccessors[objType](globeObj.__data)) || '' : '';\n    }).onHover(function (obj) {\n      // Update tooltip and trigger onHover events\n      var hoverObjFns = {\n        point: state.onPointHover,\n        arc: state.onArcHover,\n        polygon: state.onPolygonHover,\n        path: state.onPathHover,\n        hexbin: state.onHexHover,\n        hexPolygon: state.onHexPolygonHover,\n        tile: state.onTileHover,\n        label: state.onLabelHover,\n        custom: state.onCustomLayerHover\n      };\n      var hoverObj = getGlobeObj(obj); // ignore non-recognised obj types\n\n      hoverObj && !hoverObjFns.hasOwnProperty(hoverObj.__globeObjType) && (hoverObj = null);\n\n      if (hoverObj !== state.hoverObj) {\n        var prevObjType = state.hoverObj ? state.hoverObj.__globeObjType : null;\n        var prevObjData = state.hoverObj ? dataAccessors[prevObjType](state.hoverObj.__data) : null;\n        var objType = hoverObj ? hoverObj.__globeObjType : null;\n        var objData = hoverObj ? dataAccessors[objType](hoverObj.__data) : null;\n\n        if (prevObjType && prevObjType !== objType) {\n          // Hover out\n          hoverObjFns[prevObjType](null, prevObjData);\n        }\n\n        if (objType) {\n          // Hover in\n          hoverObjFns[objType](objData, prevObjType === objType ? prevObjData : null);\n        }\n\n        state.hoverObj = hoverObj;\n      }\n    }).onClick(function (obj, ev, point) {\n      if (!obj) return; // ignore background clicks\n      // Handle click events on objects\n\n      var objFns = {\n        globe: state.onGlobeClick,\n        point: state.onPointClick,\n        arc: state.onArcClick,\n        polygon: state.onPolygonClick,\n        path: state.onPathClick,\n        hexbin: state.onHexClick,\n        hexPolygon: state.onHexPolygonClick,\n        tile: state.onTileClick,\n        label: state.onLabelClick,\n        custom: state.onCustomLayerClick\n      };\n      var globeObj = getGlobeObj(obj);\n      var objType = globeObj.__globeObjType;\n\n      if (globeObj && objFns.hasOwnProperty(objType)) {\n        var args = [ev];\n\n        if (objType === 'globe') {\n          // include click coords in { lat, lng }\n          var _this$toGeoCoords = _this.toGeoCoords(point),\n              lat = _this$toGeoCoords.lat,\n              lng = _this$toGeoCoords.lng;\n\n          args.unshift({\n            lat: lat,\n            lng: lng\n          });\n        }\n\n        dataAccessors.hasOwnProperty(objType) && args.unshift(dataAccessors[objType](globeObj.__data));\n        objFns[objType].apply(objFns, args);\n      }\n    }).onRightClick(function (obj, ev, point) {\n      if (!obj) return; // ignore background clicks\n      // Handle right-click events\n\n      var objFns = {\n        globe: state.onGlobeRightClick,\n        point: state.onPointRightClick,\n        arc: state.onArcRightClick,\n        polygon: state.onPolygonRightClick,\n        path: state.onPathRightClick,\n        hexbin: state.onHexRightClick,\n        hexPolygon: state.onHexPolygonRightClick,\n        tile: state.onTileRightClick,\n        label: state.onLabelRightClick,\n        custom: state.onCustomLayerRightClick\n      };\n      var globeObj = getGlobeObj(obj);\n      var objType = globeObj.__globeObjType;\n\n      if (globeObj && objFns.hasOwnProperty(objType)) {\n        var args = [ev];\n\n        if (objType === 'globe') {\n          // include click coords in { lat, lng }\n          var _this$toGeoCoords2 = _this.toGeoCoords(point),\n              lat = _this$toGeoCoords2.lat,\n              lng = _this$toGeoCoords2.lng;\n\n          args.unshift({\n            lat: lat,\n            lng: lng\n          });\n        }\n\n        dataAccessors.hasOwnProperty(objType) && args.unshift(dataAccessors[objType](globeObj.__data));\n        objFns[objType].apply(objFns, args);\n      }\n    }); //\n    // Kick-off renderer\n\n    this._animationCycle();\n  }\n});\n\nexport default globe;\n"]},"metadata":{},"sourceType":"module"}